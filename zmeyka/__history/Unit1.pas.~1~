unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtCtrls;

type
  TForm1 = class(TForm)
    PaintBox1: TPaintBox;
    Button1: TButton;
    Timer1: TTimer;
    procedure Button1Click(Sender: TObject);
    procedure FormKeyUp(Sender: TObject; var Key: Word;
  Shift: TShiftState);
    procedure draw;
  private
    { Private declarations }
  public
    { Public declarations }
  end;
 const xc=10;yc=10;
var
  Form1: TForm1;
  nap:integer;
  zmeyx:array[1..50] of integer;
  zmeyy:array[1..50] of integer;
  lzm:integer;
  map:array[1..xc,1..yc] of char;
  celx,cely:integer;
implementation

{$R *.dfm}
procedure tform1.draw;
var i,j:integer;
begin
 for i:=1 to xc do
 begin
  for j:=1 to yc do
  if map[i,j]='1' then
  begin
   paintbox1.canvas.brush.color:=clblack;
   paintbox1.Canvas.Rectangle(round(paintbox1.Width/xc*(i-1)),round(paintbox1.Height/yc*(j-1)),round(paintbox1.Width/xc*(i)),round(paintbox1.Height/yc*(j)));
  end;
 end;
 paintbox1.canvas.brush.color:=clgreen;
 for i:=1 to lzm do
 paintbox1.Canvas.Rectangle(round(paintbox1.Width/xc*(zmeyx[lzm]-1)),round(paintbox1.Height/yc*(zmeyy[lzm]-1)),round(paintbox1.Width/xc*(zmeyx[lzm])),round(paintbox1.Height/yc*(zmeyy[lzm])));
 paintbox1.canvas.brush.color:=clred;
    paintbox1.Canvas.Rectangle(round(paintbox1.Width/xc*(celx-1)),round(paintbox1.Height/yc*(cely-1)),round(paintbox1.Width/xc*(celx)),round(paintbox1.Height/yc*(cely)));
end;
procedure TForm1.FormKeyUp(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
case key of
 vk_left:  nap:=1;
 vk_right: nap:=3;
 vk_up:    nap:=2;
 vk_down:  nap:=4;
end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var i,j:integer;e:textfile;
begin
  assignfile(e,'map.map');
  reset(e);
  zmeyx[1]:=3;
  zmeyy[1]:=3;
  zmeyx[2]:=4;
  zmeyy[2]:=3;
  zmeyx[3]:=5;
  zmeyy[3]:=3;
  lzm:=3;
  button1.Visible:=false;
  for j:=1 to yc do
  begin
   for i:=1 to xc do
   begin
    read(e,map[i,j]);
   end;
  end;
  celx:=random(xc);
  cely:=random(yc);
  timer1.Enabled:=true;
  draw;
end;

end.
